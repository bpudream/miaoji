# 音视频转写与 AI 总结工具 - 需求分析

## 1. 项目概述

### 1.1 项目名称
妙记（MiaoJi）- 本地化音视频智能转写与总结工具

### 1.2 项目目标
开发一款基于 Web 的音视频智能转写与总结工具，采用前后端分离架构。后端服务运行在 Windows 主机上，充分利用本地硬件资源（CPU + GPU）进行 AI 处理；前端通过浏览器访问，支持局域网内多设备使用。确保数据隐私和处理速度，降低使用成本。

**未来规划**: 开发独立的安卓客户端项目，通过第三方 API（如 OpenAI、Azure Speech）实现移动端的转写功能。

### 1.3 目标用户
- 需要会议记录整理的商务人士
- 需要采访/讲座转录的媒体工作者
- 需要课程笔记整理的学生/教师
- 重视数据隐私的个人用户
- 家庭用户（多设备共享使用）

### 1.4 项目范围
**本项目（Windows 服务端 + Web 前端）**:
- Windows 服务器端应用（后台服务）
- Web 前端界面（浏览器访问）
- 本地 GPU 硬件加速的 AI 处理
- 局域网多设备访问支持

**不包含在本项目中**:
- ❌ macOS / Linux 服务端支持（仅支持客户端浏览器访问）
- ❌ 独立的桌面应用程序（不使用 Electron）
- ❌ 移动端 App（将作为独立项目开发）
- ❌ 云端部署和公网访问
- ❌ 企业级安全和用户权限管理

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 音视频文件导入
- **必需功能**
  - 支持拖拽上传音视频文件（浏览器）
  - 支持文件选择器上传
  - 支持批量上传（队列处理）
  - 上传进度显示
  - 断点续传支持（可选，大文件）

- **支持格式**
  - 音频：MP3, WAV, FLAC, M4A, AAC, OGG
  - 视频：MP4, AVI, MOV, MKV, FLV, WMV

- **文件预览**
  - 显示文件基本信息（时长、大小、格式）
  - 上传前的客户端验证（格式、大小）
  - 音频波形可视化（可选）

**注**: 局域网环境下，文件上传速度快（通常 50-100MB/s），大文件上传体验良好

#### 2.1.2 语音转文字（ASR）
- **核心能力**
  - 高精度语音识别
  - 多语言支持（中文、英文优先，可扩展其他语言）
  - 自动语言检测
  - 说话人分离（可选，进阶功能）

- **性能要求**
  - 充分利用 GPU 加速（RTX 4070 TI Super）
  - 处理速度 ≥ 5倍实时速度（例如：10分钟音频在2分钟内完成）
  - 识别准确率 ≥ 95%（普通话/英语标准语音）

- **用户体验**
  - 实时显示转写进度
  - 支持暂停/恢复处理
  - 显示预估剩余时间

#### 2.1.3 文字稿编辑
- **基础编辑**
  - 文本查看和编辑
  - 时间戳标注
  - 段落自动分割
  - 查找替换功能

- **高级功能**
  - 音频同步播放（点击文字定位音频位置）
  - 关键词高亮
  - 文本导出（TXT, DOCX, PDF, SRT 字幕格式）

#### 2.1.4 AI 智能总结
- **总结类型**
  - 摘要生成（提取核心内容）
  - 要点提取（结构化列表）
  - 关键信息提取（人名、地点、时间、事件）
  - 章节划分（按主题自动分段）

- **自定义选项**
  - 总结长度控制（简短/中等/详细）
  - 输出格式选择（段落/列表/思维导图）
  - 自定义提示词（高级用户）

- **性能要求**
  - 本地 LLM 推理
  - GPU 加速推理
  - 合理的响应时间（< 30秒 for 1万字内容）

### 2.2 辅助功能

#### 2.2.1 项目管理
- 历史记录管理
- 项目收藏/标签分类
- 全文搜索
- 导入/导出项目

#### 2.2.2 设置与配置
- 语音识别引擎选择
- AI 模型选择与管理
- 输出格式配置
- 快捷键自定义
- 缓存管理

#### 2.2.3 性能监控
- GPU/CPU 使用率显示
- 内存占用监控
- 处理速度统计

## 3. 非功能需求

### 3.1 性能要求
- **服务启动时间**：< 10秒（包括模型加载）
- **Web 页面加载**：< 2秒
- **UI 响应速度**：操作响应 < 100ms
- **并发处理**：支持后台队列处理多个文件
- **多用户支持**：支持局域网内 3-5 个设备同时访问（队列处理）
- **资源占用**：
  - 服务端空闲内存 < 2GB
  - 处理时 GPU 利用率 > 80%
  - 前端（浏览器）内存 < 200MB

### 3.2 兼容性要求
- **服务端（Windows 主机）**
  - 操作系统：Windows 10/11 (x64)
  - 最低配置：4核 CPU, 8GB RAM, NVIDIA GPU（支持 CUDA）
  - 推荐配置：6核+ CPU, 16GB+ RAM, RTX 3060+ GPU
  - 参考配置：i5-13600KF + RTX 4070 TI Super

- **客户端（浏览器访问）**
  - 现代浏览器：Chrome 90+, Edge 90+, Firefox 88+, Safari 14+
  - 设备：Windows PC, Mac, 平板, 手机等任何支持浏览器的设备
  - 网络：局域网连接（Wi-Fi 或有线）

### 3.3 数据安全
- 所有 AI 处理完全在本地服务器完成，不上传外部云端
- 局域网环境使用，数据不出家庭网络
- 基础的用户认证（可选，防止误访问）
- 文件上传大小限制和格式验证

**注**: 由于是家庭局域网使用，安全策略保持简单实用，不需要复杂的企业级安全方案

### 3.4 用户体验
- 现代化 UI 设计
- 深色/浅色主题切换
- 多语言界面（中文/英文）
- 完善的错误提示和帮助文档

### 3.5 可扩展性
- 插件系统（可扩展新的 AI 能力）
- 支持自定义模型接入
- API 接口（供其他应用调用）

## 4. 技术约束

### 4.1 开发技术栈
- **后端服务**: Node.js / Python（API 服务器 + AI 处理）
- **前端**: Web 应用（React + TypeScript）
- **架构**: 前后端分离，RESTful API 通信
- **部署**: Windows 服务端，局域网访问
- **GPU 加速**: 充分利用 NVIDIA CUDA（RTX 4070 TI Super）

### 4.2 模型要求
- 优先使用开源模型
- 模型大小适中（总计 < 20GB）
- 支持量化优化
- 支持 GPU 加速

### 4.3 网络要求
- 局域网环境（家庭网络）
- 支持大文件上传（音视频文件可能几百 MB 到几 GB）
- 不考虑外网访问和流量成本
- 典型访问方式：
  - 同一台电脑：http://localhost:8080
  - 局域网其他设备：http://192.168.x.x:8080

### 4.4 部署环境
- **服务端部署**: Windows 后台服务（可选择开机自启）
- **访问方式**: 浏览器直接访问，无需安装客户端
- **数据存储**: 服务端本地磁盘
- **备份策略**: 用户自行备份项目文件（可导出）

## 5. 项目优先级

### P0 - 第一阶段（MVP）
- 音视频文件导入
- 基础语音转文字（中英文）
- 简单文本编辑
- 基础 AI 摘要生成
- 导出文本文件

### P1 - 第二阶段
- GPU 加速优化
- 多语言支持扩展
- 高级编辑功能
- 多种总结模式
- 项目管理功能

### P2 - 第三阶段
- 说话人分离
- 实时转写（麦克风输入，浏览器）
- 多用户管理（简单的用户系统）
- WebSocket 实时通信（更好的进度推送）
- 批量处理优化
- 服务端管理界面（监控、配置）

### P3 - 未来扩展（独立项目）
- 安卓移动端 App
- iOS 移动端 App
- 使用第三方 API 的云端版本

## 6. 成功指标

### 6.1 功能指标
- 语音识别准确率 ≥ 95%
- 支持至少 2 种语言（中文+英文）
- AI 总结质量用户满意度 ≥ 85%

### 6.2 性能指标
- 转写速度 ≥ 5x 实时速度
- GPU 利用率 ≥ 80%（处理时）
- 应用崩溃率 < 0.1%

### 6.3 用户体验指标
- 学习成本低，新用户 5 分钟内完成首次转写
- 界面美观度评分 ≥ 4.0/5.0

## 7. 架构概要

### 7.1 系统架构
```
┌─────────────────────────────────────────────────┐
│           客户端（浏览器）                          │
│   - React/Vue Web 应用                           │
│   - 响应式设计（支持各种设备）                      │
│   - 通过 HTTP/WebSocket 与服务端通信              │
└─────────────┬───────────────────────────────────┘
              │ HTTP API / WebSocket
              ↓
┌─────────────────────────────────────────────────┐
│      服务端（Windows + GPU）                      │
│                                                  │
│  ┌──────────────────────────────────────┐      │
│  │   API 服务器（Node.js/Fastify）       │      │
│  │   - 文件上传处理                      │      │
│  │   - 任务队列管理                      │      │
│  │   - WebSocket 实时通信                │      │
│  └──────────────┬───────────────────────┘      │
│                 │                               │
│  ┌──────────────▼───────────────────────┐      │
│  │   AI 处理模块（Python）               │      │
│  │   - faster-whisper（GPU 加速）        │      │
│  │   - Ollama + Qwen3-14B（GPU 加速）    │      │
│  │   - FFmpeg 音频处理                   │      │
│  └──────────────────────────────────────┘      │
│                                                  │
│  ┌──────────────────────────────────────┐      │
│  │   数据存储（SQLite）                  │      │
│  │   - 项目元数据                        │      │
│  │   - 转写结果                          │      │
│  │   - 用户配置                          │      │
│  └──────────────────────────────────────┘      │
└─────────────────────────────────────────────────┘
```

### 7.2 技术选型
- **后端框架**: Fastify / Express（Node.js）
- **AI 处理**: Python + faster-whisper + Ollama
- **前端框架**: React + TypeScript + Tailwind CSS
- **通信协议**: RESTful API + WebSocket（实时推送）
- **数据库**: SQLite（轻量级，单文件）
- **文件上传**: Multipart/form-data（支持大文件）

### 7.3 关键优势
- ✅ **前后端分离**: 维护简单，可独立升级
- ✅ **无客户端安装**: 浏览器直接访问，降低使用门槛
- ✅ **局域网共享**: 多设备可共享同一个 GPU 服务器
- ✅ **成本效益**: 充分利用现有硬件，无云端费用
- ✅ **数据安全**: 数据不出局域网，完全私密

### 7.4 与移动端的配合
- **本项目**: Windows 服务端 + Web 前端（局域网使用）
- **未来移动端项目**:
  - 在家时可访问本地服务（通过局域网）
  - 外出时使用第三方 API（OpenAI/Azure）
  - 两个独立项目，技术栈可以不同
